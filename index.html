<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2N · Programa Presupuestos</title>

    <!-- CSS principal -->
    <link rel="stylesheet" href="style.css" />

    <!-- Favicon opcional -->
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  </head>

  <body>
    <!-- =========================================================
         LOGIN PAGE
    ========================================================== -->
    <div id="loginPage" class="login-page" style="display: none">
      <div class="login-card">
        <h2 class="login-title">Acceso</h2>
        <p class="login-subtitle">
          Inicia sesión para acceder al programa de presupuestos 2N.
        </p>

        <div class="form-group mb-2">
          <label>Email</label>
          <input
            id="loginEmail"
            type="email"
            placeholder="nombre@empresa.com"
          />
        </div>

        <div class="form-group mb-3">
          <label>Contraseña</label>
          <input id="loginPass" type="password" placeholder="••••••••" />
        </div>

        <button id="btnLogin" class="btn btn-primary" style="width: 100%">
          Entrar
        </button>

        <div
          id="loginError"
          class="alert alert-error mt-2"
          style="display: none"
        ></div>

        <p class="login-footer">Programa Presupuestos · 2N</p>
      </div>
    </div>

    <!-- =========================================================
         APP SHELL (DESPUÉS DEL LOGIN)
    ========================================================== -->
    <div id="appShell" class="app-shell" style="display: none">
      <!-- ===== BARRA SUPERIOR TIPO SALESFORCE ===== -->
      <header class="app-topbar">
        <!-- Título + subtítulo fijo -->
        <div class="app-topbar-left">
          <div class="app-topbar-title">Programa Presupuestos 2N</div>

          <div id="currentViewSubtitle" class="app-topbar-subtitle">
            Presupuestos 2N · Uso interno. Datos orientativos, validar siempre
            con tarifa actualizada.
          </div>
        </div>

        <!-- ===== Tabs Superiores ===== -->
        <nav class="app-topbar-center">
          <a
            href="#"
            class="top-nav-link active"
            data-view="proyecto"
            id="navProyecto"
            >Proyecto</a
          >

          <a href="#" class="top-nav-link" data-view="presupuesto">
            Presupuesto
          </a>

          <a href="#" class="top-nav-link" data-view="tarifa">Tarifa 2N</a>

          <a href="#" class="top-nav-link" data-view="docs">Documentación</a>
        </nav>

        <!-- ===== Usuario + Logout ===== -->
        <div class="app-topbar-right">
          <span id="userBadge" class="badge-user">Usuario</span>
          <button id="btnLogout" class="btn btn-secondary btn-sm">
            Cerrar sesión
          </button>
        </div>
      </header>

      <!-- ===== CONTENIDO CENTRAL ===== -->
      <main id="appContent" class="app-content"></main>
    </div>

    <!-- =========================================================
         LIBRERÍAS
    ========================================================== -->

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <!-- Excel (SheetJS) -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

    <!-- =========================================================
         ARCHIVOS PRINCIPALES DEL PROYECTO
    ========================================================== -->

    <!-- Firebase config -->
    <script src="js/firebase.js"></script>
    <script src="js/firebase_tarifa.js"></script>

    <!-- Estado global -->
    <script src="js/state.js"></script>

    <!-- Utilidades -->
    <script src="js/utils.js"></script>

    <!-- UI Components -->
    <script src="js/ui_login.js"></script>
    <script src="js/ui_shell.js"></script>
    <script src="js/ui_proyecto.js"></script>
    <script src="js/ui_presupuesto.js"></script>
    <script src="js/ui_tarifa.js"></script>
    <script src="js/ui_dashboard_doc.js"></script>

    <!-- PDF y Excel export -->
    <script src="js/pdf_excel.js"></script>

    <!-- Core app -->
    <script src="app.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
