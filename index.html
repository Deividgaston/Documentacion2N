<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Presupuestos 2N</title>

    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  </head>

  <body>
    <!-- =========================================================
         LOGIN (MODAL FLOTANTE)
    ========================================================== -->
    <div id="loginPage" class="login-page">
      <div class="login-card">
        <h2 class="login-title">Acceso</h2>
        <p class="login-subtitle">Inicia sesi√≥n para acceder a Presupuestos 2N.</p>

        <div class="form-group mb-2">
          <label>Email</label>
          <input id="loginEmail" type="email" placeholder="nombre@empresa.com" />
        </div>

        <div class="form-group mb-3">
          <label>Contrase√±a</label>
          <input id="loginPass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
        </div>

        <button id="btnLogin" class="btn btn-primary" style="width: 100%">
          Entrar
        </button>

        <div class="text-center mt-2" style="font-size:0.78rem; color:#6b7280;">o</div>

        <button id="btnLoginGoogle" class="btn btn-secondary mt-2" style="width: 100%">
          Acceder con Google
        </button>

        <div id="loginError" class="alert alert-error mt-2" style="display: none"></div>

        <p class="login-footer">Presupuestos 2N</p>
      </div>
    </div>


    <!-- =========================================================
         APLICACI√ìN PRINCIPAL (OCULTA HASTA LOGIN)
    ========================================================== -->
    <div id="appShell" class="app-shell" style="display: none">
      <header class="app-topbar">
        <div class="app-topbar-left">
          <div class="app-topbar-title">Presupuestos 2N</div>
          <div id="currentViewSubtitle" class="app-topbar-subtitle"></div>
        </div>

        <nav class="app-topbar-center">
          <a href="#" class="top-nav-link active" data-view="proyecto" id="navProyecto">Proyecto</a>
          <a href="#" class="top-nav-link" data-view="presupuesto">Presupuesto</a>
          <a href="#" class="top-nav-link" data-view="simulador">Simulador</a>
          <a href="#" class="top-nav-link" data-view="tarifa">Tarifa 2N</a>
          <a href="#" class="top-nav-link" data-view="tarifas">Tarifas</a>

          <!-- üîπ Documentaci√≥n (memoria de calidades / PDF) -->
          <a href="#" class="top-nav-link" data-view="documentacion">Documentaci√≥n</a>

          <!-- üîπ Nueva p√°gina: Gesti√≥n de documentaci√≥n (CRUD de ficheros) -->
          <a href="#" class="top-nav-link" data-view="docGestion">Gesti√≥n documentaci√≥n</a>
        </nav>

        <div class="app-topbar-right">
          <span id="userBadge" class="badge-user">Usuario</span>
          <button id="btnLogout" class="btn btn-secondary btn-sm">Cerrar sesi√≥n</button>
        </div>
      </header>

      <main id="appContent" class="app-content"></main>
    </div>


    <!-- =========================================================
         LIBRER√çAS EXTERNAS
    ========================================================== -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/exceljs@4.4.0/dist/exceljs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

    <!-- jsPDF + AutoTable -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>



    <!-- =========================================================
         ARCHIVOS JS DEL PROYECTO
    ========================================================== -->

    <!-- Firebase inicializaci√≥n -->
    <script src="js/firebase.js"></script>

    <script src="js/state.js"></script>
    <script src="js/utils.js"></script>

    <script src="js/ui_login.js"></script>
    <script src="js/ui_shell.js"></script>

    <script src="js/ui_proyecto.js"></script>
    <script src="js/ui_presupuesto.js"></script>

    <!-- Simulador -->
    <script src="js/ui_simulador.js"></script>

    <!-- Tarifa -->
    <script type="module" src="js/ui_tarifa.js"></script>
    <script src="js/ui_tarifas.js"></script>

    <!-- Documentaci√≥n -->
    <script src="js/ui_documentacion.js"></script>
    <script src="js/ui_doc_gestion.js"></script>
    <script src="js/ui_dashboard_doc.js"></script>

    <!-- Exportaci√≥n PDF / Excel -->
    <script src="js/pdf_excel.js"></script>

    <!-- App core -->
    <script src="app.js"></script>
    <script src="js/main.js"></script>

  </body>
</html>
